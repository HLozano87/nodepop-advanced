<%- include('header') %>
<main class="flex-grow">
  <div class="max-w-2xl mx-auto mt-10 p-6 bg-white rounded shadow-md">
    <h2 class="text-2xl text-center font-bold text-gray-800 mb-6">
      <%= __("New Product") %>
    </h2>

    <form
      action="/user/new"
      method="post"
      enctype="multipart/form-data"
      class="space-y-5"
    >
      <div>
        <label for="name" class="block text-sm font-medium text-gray-700 mb-1">
          <%= __("Name product") %>:
        </label>
        <input
          type="text"
          id="name"
          name="name"
          value="<%= oldInput?.name || '' %>"
          placeholder="iPhone 12"
          required
          class="w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:ring-2"
        />
        <% if (errors?.name) { %>
          <p class="text-sm text-red-600 mt-1"><%= __(errors.name.msg) %></p>
        <% } %>
      </div>

      <div>
        <label for="price" class="block text-sm font-medium text-gray-700 mb-1">
          <%= __("Price") %> (â‚¬):
        </label>
        <input
          type="number"
          id="price"
          name="price"
          step="0.01"
          placeholder="500"
          value="<%= oldInput?.price || '' %>"
          required
          class="w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:ring-2"
        />
        <% if (errors?.price) { %>
          <p class="text-sm text-red-600 mt-1"><%= __(errors.price.msg) %></p>
        <% } %>
      </div>

      <div>
        <label for="tags" class="block text-sm font-medium text-gray-700 mb-2">
          <%= __("Tags") %>:
        </label>
        <select
          name="tags"
          id="tags"
          multiple
          required
          class="w-full border border-gray-300 rounded-md px-4 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-emerald-500"        >
          <% tags.forEach(tag => { %>
              <option
                value="<%= tag %>"
                <%= oldInput && oldInput.tags && oldInput.tags.includes(tag) ? "selected" : "" %>
              >
                <%= __(tag) %>
              </option>
            <% }) %>
        </select>
        <p class="text-xs text-gray-500 mt-1">
          <%= __("Hold Ctrl (or Cmd) to select multiple tags") %>
        </p>
      </div>

      <div>
        <label
          for="imageFile"
          class="block text-sm font-medium text-gray-700 mb-1"
        >
          <%= __("Image") %>:
        </label>
        <input
          type="file"
          id="imageFile"
          name="imageFile"
          accept="image/*"
          class="w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"
        />
        <% if (errors?.imageFile) { %>
          <p class="text-sm text-red-600 mt-1"><%= __(errors.imageFile.msg) %></p>
        <% } %>
      </div>

      <div class="flex justify-between items-center">
        <button
          type="submit"
          class="bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition"
        >
          <%= __("Upload") %>
        </button>

        <a href="/" class="text-gray-700 hover:text-blue-600 underline text-sm">
          <%= __("Cancel") %>
        </a>
      </div>
    </form>
  </div>
</main>

<%- include('footer') %>
